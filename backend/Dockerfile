# –ë–∞–∑–æ–≤–∏–π –æ–±—Ä–∞–∑
FROM python:3.11-slim

# ASCII-–∞–Ω—ñ–º–∞—Ü—ñ—è + —ñ–Ω—Å—Ç–∞–ª—è—Ü—ñ—è –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π
RUN echo "üöÄ –ü—ñ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫–æ—Å–º—ñ—á–Ω–æ–≥–æ –∫–æ—Ä–∞–±–ª—è..." \
    && apt-get update \
    && apt-get install -y --no-install-recommends \
        git \
        build-essential \
        wget \
        curl \
        libatlas-base-dev \
        gfortran \
        pkg-config \
        ca-certificates \
        locales \
        python3-dev \
    && echo "" \
    && echo "   |" \
    && echo "  / \\" \
    && echo " |   |" \
    && echo "  | |" \
    && echo "  | |" \
    && echo " /   \\" \
    && echo " |NASA|" \
    && echo "  | |" \
    && echo "  | |" \
    && echo " /   \\" \
    && echo "/     \\" \
    && echo "--------" \
    && sleep 1 \
    && echo "üî• –ó–∞–ø–∞–ª—é–≤–∞–Ω–Ω—è –¥–≤–∏–≥—É–Ω—ñ–≤..." && sleep 1 \
    && echo "üí® –í—ñ–¥—Ä–∏–≤ –≤—ñ–¥ —Å—Ç–∞—Ä—Ç–æ–≤–æ–≥–æ —Å—Ç–æ–ª—É..." && sleep 1 \
    && echo "ü™ê –ü–æ–ª—ñ—Ç –¥–æ –∑—ñ—Ä–æ–∫!" && sleep 1 \
    && apt-get clean \
    && rm -rf /var/lib/apt/lists/*

# –†–æ–±–æ—á–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—è
WORKDIR /app

# –ö–æ–ø—ñ—é—î–º–æ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ —Ç–∞ –≤—Å—Ç–∞–Ω–æ–≤–ª—é—î–º–æ —ó—Ö
COPY requirements.txt .
RUN pip install --no-cache-dir -r requirements.txt

# –ö–æ–ø—ñ—é—î–º–æ —Ä–µ—à—Ç—É –∫–æ–¥—É
COPY . .

# –ó–∞–ø—É—Å–∫
CMD ["gunicorn", "-w", "4", "-b", "0.0.0.0:8080", "app:app"]